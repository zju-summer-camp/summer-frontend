{"version":3,"sources":["webpack:///./src/components/InfoEditor.vue?cddc","webpack:///./src/components/Editors/ScriptLoader.ts","webpack:///./src/components/Editors/TinyMCE.ts","webpack:///./src/components/Editors/Utils.ts","webpack:///./src/components/Editors/components/EditorPropTypes.ts","webpack:///./src/components/Editors/components/Editor.ts","webpack:///./src/components/Editors/index.ts","webpack:///./src/components/InfoEditor.vue","webpack:///./src/components/InfoEditor.vue?6004","webpack:///./src/components/InfoEditor.vue?ac8f","webpack:///./src/components/Editors/getEncodeData.ts","webpack:///./src/views/management/Upload.vue?6413","webpack:///./src/components/InfoEditor.vue?1fd0","webpack:///./src/views/management/Upload.vue?3f21","webpack:///./src/views/management/Upload.vue","webpack:///./src/views/management/Upload.vue?c703","webpack:///./src/views/management/Upload.vue?daa7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","initConfig","itemConfig","formConfig","model","value","callback","$$v","$set","expression","staticRenderFns","createState","listeners","scriptId","scriptLoaded","CreateScriptLoader","state","injectScriptTag","doc","url","scriptTag","createElement","referrerPolicy","type","id","src","handler","removeEventListener","addEventListener","head","appendChild","load","push","getElementById","forEach","fn","reinitialize","ScriptLoader","getTinymce","window","tinymce","validEvents","isValidKey","key","map","event","toLowerCase","indexOf","bindHandlers","initEvent","editor","Object","keys","filter","on","substring","e","bindModelHandlers","ctx","modelEvents","$props","normalizedEvents","Array","isArray","join","$emit","getContent","format","outputFormat","initEditor","initialValue","setContent","initialized","cache","$watch","val","prevVal","$listeners","input","unique","uuid","prefix","time","Date","now","random","Math","floor","String","isTextarea","element","tagName","normalizePluginArray","plugins","split","mergePlugins","initPlugins","inputPlugins","concat","isNullOrUndefined","undefined","editorProps","apiKey","cloudChannel","init","inline","Boolean","toolbar","disabled","tinymceScriptSrc","validator","prop","itemConf","renderInline","h","renderIframe","style","visibility","initialise","finalInit","readonly","selector","elementId","inlineEditor","setup","display","Editor","props","created","watch","setMode","mounted","$el","ownerDocument","channel","scriptSrc","beforeDestroy","remove","deactivated","activated","language","height","resize","default","Upload","components","component","Base64","encode","str","btoa","encodeURIComponent","replace","match","p1","num","Number","fromCharCode","decode","decodeURIComponent","atob","c","charCodeAt","toString","slice","getEncodedContent","tinymceHtml","getDecodedContent","encoded","width","items","projectName","hint","label","placeholder","submitkey","error","required","rules","deadline","tutor","academy","content","ref","buttons","submit","name","text","func","data","Detail","console","log","Deatil","createproject","method","then","resp","code","$message","alert","catch","reset","DqForm","InfoEditor"],"mappings":"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","file":"js/chunk-1efc7c20.299c49d6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor-wrapper\"},[_c('editor',{attrs:{\"init\":_vm.initConfig,\"itemConfig\":_vm.itemConfig,\"formConfig\":_vm.formConfig},model:{value:(_vm.itemConfig.value),callback:function ($$v) {_vm.$set(_vm.itemConfig, \"value\", $$v)},expression:\"itemConfig.value\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\r\n * Copyright (c) 2018-present, Ephox, Inc.\r\n *\r\n * This source code is licensed under the Apache 2 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\nimport { uuid } from './Utils';\r\n\r\nexport type callbackFn = () => void;\r\nexport interface StateObj {\r\n  listeners: callbackFn[];\r\n  scriptId: string;\r\n  scriptLoaded: boolean;\r\n}\r\n\r\nconst createState = (): StateObj => {\r\n  return {\r\n    listeners: [],\r\n    scriptId: 'tiny-script',\r\n    scriptLoaded: false\r\n  };\r\n};\r\n\r\ninterface ScriptLoader {\r\n  load: (doc: Document, url: string, callback: callbackFn) => void;\r\n  reinitialize: () => void;\r\n}\r\n\r\nconst CreateScriptLoader = (): ScriptLoader => {\r\n  let state: StateObj = createState();\r\n\r\n  // 注入 script 脚本\r\n  const injectScriptTag = (scriptId: string, doc: Document, url: string, callback: callbackFn) => {\r\n    const scriptTag = doc.createElement('script');\r\n    scriptTag.referrerPolicy = 'origin';\r\n    scriptTag.type = 'application/javascript';\r\n    scriptTag.id = scriptId;\r\n    scriptTag.src = url;\r\n\r\n    const handler = () => {\r\n      scriptTag.removeEventListener('load', handler);\r\n      callback();\r\n    };\r\n    scriptTag.addEventListener('load', handler);\r\n    if (doc.head) {\r\n      doc.head.appendChild(scriptTag);\r\n    }\r\n  };\r\n\r\n  const load = (doc: Document, url: string, callback: callbackFn) => {\r\n    if (state.scriptLoaded) {\r\n      callback();\r\n    } else {\r\n      state.listeners.push(callback);\r\n      if (!doc.getElementById(state.scriptId)) {\r\n        injectScriptTag(state.scriptId, doc, url, () => {\r\n          state.listeners.forEach((fn) => fn());\r\n          state.scriptLoaded = true;\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  // Only to be used by tests.\r\n  const reinitialize = () => {\r\n    state = createState();\r\n  };\r\n\r\n  return {\r\n    load,\r\n    reinitialize\r\n  };\r\n};\r\n\r\nconst ScriptLoader = CreateScriptLoader();\r\n\r\nexport {\r\n  ScriptLoader\r\n};","/**\r\n * Copyright (c) 2018-present, Ephox, Inc.\r\n *\r\n * This source code is licensed under the Apache 2 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\n\r\n\r\nconst getTinymce = () => {\r\n\r\n  return window && window.tinymce ? window.tinymce : null;\r\n};\r\n\r\nexport { getTinymce };\r\n","/**\r\n * Copyright (c) 2018-present, Ephox, Inc.\r\n *\r\n * This source code is licensed under the Apache 2 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\nimport { Editor } from './components/Editor';\r\n\r\nconst validEvents = [\r\n  'onActivate',\r\n  'onAddUndo',\r\n  'onBeforeAddUndo',\r\n  'onBeforeExecCommand',\r\n  'onBeforeGetContent',\r\n  'onBeforeRenderUI',\r\n  'onBeforeSetContent',\r\n  'onBeforePaste',\r\n  'onBlur',\r\n  'onChange',\r\n  'onClearUndos',\r\n  'onClick',\r\n  'onContextMenu',\r\n  'onCopy',\r\n  'onCut',\r\n  'onDblclick',\r\n  'onDeactivate',\r\n  'onDirty',\r\n  'onDrag',\r\n  'onDragDrop',\r\n  'onDragEnd',\r\n  'onDragGesture',\r\n  'onDragOver',\r\n  'onDrop',\r\n  'onExecCommand',\r\n  'onFocus',\r\n  'onFocusIn',\r\n  'onFocusOut',\r\n  'onGetContent',\r\n  'onHide',\r\n  'onInit',\r\n  'onKeyDown',\r\n  'onKeyPress',\r\n  'onKeyUp',\r\n  'onLoadContent',\r\n  'onMouseDown',\r\n  'onMouseEnter',\r\n  'onMouseLeave',\r\n  'onMouseMove',\r\n  'onMouseOut',\r\n  'onMouseOver',\r\n  'onMouseUp',\r\n  'onNodeChange',\r\n  'onObjectResizeStart',\r\n  'onObjectResized',\r\n  'onObjectSelected',\r\n  'onPaste',\r\n  'onPostProcess',\r\n  'onPostRender',\r\n  'onPreProcess',\r\n  'onProgressState',\r\n  'onRedo',\r\n  'onRemove',\r\n  'onReset',\r\n  'onSaveContent',\r\n  'onSelectionChange',\r\n  'onSetAttrib',\r\n  'onSetContent',\r\n  'onShow',\r\n  'onSubmit',\r\n  'onUndo',\r\n  'onVisualAid'\r\n];\r\n\r\nconst isValidKey = (key: string) => validEvents.map(event => event.toLowerCase()).indexOf(key.toLowerCase()) !== -1;\r\n\r\nconst bindHandlers = (initEvent: Event, listeners: any, editor: any): void => {\r\n  Object.keys(listeners)\r\n    .filter(isValidKey)\r\n    .forEach((key: string) => {\r\n      const handler = listeners[key];\r\n      if (typeof handler === 'function') {\r\n        if (key === 'onInit') {\r\n          handler(initEvent, editor);\r\n        } else {\r\n          editor.on(key.substring(2), (e: any) => handler(e, editor));\r\n        }\r\n      }\r\n    });\r\n};\r\n\r\nconst bindModelHandlers = (ctx: Editor, editor: any) => {\r\n  const modelEvents = ctx.$props.modelEvents ? ctx.$props.modelEvents : null;\r\n  const normalizedEvents = Array.isArray(modelEvents) ? modelEvents.join(' ') : modelEvents;\r\n\r\n  editor.on(normalizedEvents ? normalizedEvents : 'change input undo redo', () => {\r\n    ctx.$emit('input', editor.getContent({ format: ctx.$props.outputFormat }));\r\n  });\r\n};\r\n\r\nconst initEditor = (initEvent: Event, ctx: Editor, editor: any) => {\r\n  const value = ctx.$props.value ? ctx.$props.value : '';\r\n  const initialValue = ctx.$props.initialValue ? ctx.$props.initialValue : '';\r\n\r\n  editor.setContent(value || (ctx.initialized ? ctx.cache : initialValue));\r\n\r\n  // 绑定 value 的监听器，防止用户使用的是 :value 而不是 v-model\r\n  ctx.$watch('value', (val: string, prevVal: string) => {\r\n    if (editor && typeof val === 'string' && val !== prevVal && val !== editor.getContent({ format: ctx.$props.outputFormat })) {\r\n      editor.setContent(val);\r\n    }\r\n  });\r\n\r\n  // 检查是否使用了 v-model，若是，则绑定 input 事件的监听器，实现数据的双向绑定\r\n  // 绑定 change 和 keyup 等事件\r\n  if (ctx.$listeners.input) {\r\n    bindModelHandlers(ctx, editor);\r\n  }\r\n\r\n  bindHandlers(initEvent, ctx.$listeners, editor);\r\n  ctx.initialized = true;\r\n};\r\n\r\nlet unique = 0;\r\n// 为什么要加上uid呢，供多个使用？\r\nconst uuid = (prefix: string): string => {\r\n  const time = Date.now();\r\n  const random = Math.floor(Math.random() * 1000000000);\r\n\r\n  unique++;\r\n\r\n  return prefix + '_' + random + unique + String(time);\r\n};\r\n\r\nconst isTextarea = (element: Element | null): element is HTMLTextAreaElement => {\r\n  return element !== null && element.tagName.toLowerCase() === 'textarea';\r\n};\r\n\r\nconst normalizePluginArray = (plugins?: string | string[]): string[] => {\r\n  if (typeof plugins === 'undefined' || plugins === '') {\r\n    return [];\r\n  }\r\n\r\n  return Array.isArray(plugins) ? plugins : plugins.split(' ');\r\n};\r\n\r\nconst mergePlugins = (initPlugins: string | string[], inputPlugins?: string | string[]) =>\r\n  normalizePluginArray(initPlugins).concat(normalizePluginArray(inputPlugins));\r\n\r\nconst isNullOrUndefined = (value: any): value is null | undefined => value === null || value === undefined;\r\n\r\nexport {\r\n  bindHandlers,\r\n  bindModelHandlers,\r\n  initEditor,\r\n  isValidKey,\r\n  uuid,\r\n  isTextarea,\r\n  mergePlugins,\r\n  isNullOrUndefined\r\n};\r\n","/**\r\n * Copyright (c) 2018-present, Ephox, Inc.\r\n *\r\n * This source code is licensed under the Apache 2 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\nexport type CopyProps<T> = { [P in keyof T]: any };\r\n\r\nexport interface PropTypes {\r\n  apiKey: string;\r\n  cloudChannel: string;\r\n  id: string;\r\n  init: any;\r\n  initialValue: string;\r\n  outputFormat: 'html' | 'text';\r\n  inline: boolean;\r\n  modelEvents: string[] | string;\r\n  plugins: string[] | string;\r\n  tagName: string;\r\n  toolbar: string[] | string;\r\n  value: string;\r\n  disabled: boolean;\r\n  tinymceScriptSrc: string;\r\n  itemConf: ItemConf;\r\n  formConfig: FormConf;\r\n}\r\n\r\nexport const editorProps: CopyProps<PropTypes> = {\r\n  apiKey: String,\r\n  cloudChannel: String,\r\n  id: String,\r\n  init: Object,\r\n  initialValue: String,\r\n  inline: Boolean,\r\n  modelEvents: [String, Array],\r\n  plugins: [String, Array],\r\n  tagName: String,\r\n  toolbar: [String, Array],\r\n  value: String,\r\n  disabled: Boolean,\r\n  tinymceScriptSrc: String,\r\n  outputFormat: {\r\n    type: String,\r\n    validator: (prop: string) => prop === 'html' || prop === 'text'\r\n  },\r\n  itemConf: {\r\n    type: Object\r\n  },\r\n  formConfig: {\r\n    type: Object\r\n  }\r\n};\r\n","/**\r\n * Copyright (c) 2018-present, Ephox, Inc.\r\n *\r\n * This source code is licensed under the Apache 2 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\nimport { ThisTypedComponentOptionsWithRecordProps } from 'vue/types/options';\r\nimport { CreateElement, Vue } from 'vue/types/vue';\r\n\r\nimport { ScriptLoader } from '../ScriptLoader';\r\nimport { getTinymce } from '../TinyMCE';\r\nimport { initEditor, isTextarea, mergePlugins, uuid, isNullOrUndefined } from '../Utils';\r\nimport { editorProps, PropTypes } from './EditorPropTypes';\r\n\r\ndeclare module 'vue/types/vue' {\r\n  interface Vue {\r\n    elementId: string;\r\n    element: Element | null;\r\n    editor: any;\r\n    inlineEditor: boolean;\r\n    initialized: boolean;\r\n    cache: string;\r\n  }\r\n}\r\n\r\nexport interface Editor extends Vue {\r\n  $props: Partial<PropTypes>;\r\n}\r\n\r\nconst renderInline = (h: CreateElement, id: string, tagName?: string) => {\r\n  return h(tagName ? tagName : 'div', {\r\n    attrs: { id }\r\n  });\r\n};\r\n\r\nconst renderIframe = (h: CreateElement, id: string) => {\r\n  return h('textarea', {\r\n    attrs: { id },\r\n    style: { visibility: 'hidden' }\r\n  });\r\n};\r\n\r\nconst initialise = (ctx: Editor) => () => {\r\n  // 使用组件 props 初始化参数对象 finalInit\r\n  const finalInit = {\r\n    ...ctx.$props.init,\r\n    readonly: ctx.$props.disabled,\r\n    selector: `#${ctx.elementId}`,\r\n    plugins: mergePlugins(ctx.$props.init && ctx.$props.init.plugins, ctx.$props.plugins),\r\n    toolbar: ctx.$props.toolbar || (ctx.$props.init && ctx.$props.init.toolbar),\r\n    inline: ctx.inlineEditor,\r\n    setup: (editor: any) => {\r\n      ctx.editor = editor;\r\n      editor.on('init', (e: Event) => initEditor(e, ctx, editor));\r\n\r\n      if (ctx.$props.init && typeof ctx.$props.init.setup === 'function') {\r\n        ctx.$props.init.setup(editor);\r\n      }\r\n    }\r\n  };\r\n\r\n  // 针对 textarea 类型的样式输入框做特殊处理\r\n  if (isTextarea(ctx.element)) {\r\n    ctx.element.style.visibility = '';\r\n    ctx.element.style.display = '';\r\n  }\r\n\r\n  // 使用 tinyMCE 提供的 init 接口，将普通文本框渲染为富文本编辑器\r\n  getTinymce().init(finalInit);\r\n};\r\n\r\nexport const Editor: ThisTypedComponentOptionsWithRecordProps<Vue, {}, {}, {}, PropTypes> = {\r\n  props: editorProps,\r\n  created() {\r\n    this.elementId = this.$props.id || uuid('tiny-vue');\r\n    this.inlineEditor = (this.$props.init && this.$props.init.inline) || this.$props.inline;\r\n    this.initialized = false;\r\n  },\r\n  watch: {\r\n    disabled() {\r\n      (this as any).editor.setMode(this.disabled ? 'readonly' : 'design');\r\n    },\r\n  },\r\n  mounted() {\r\n    this.element = this.$el;\r\n    if (getTinymce() !== null) {\r\n      initialise(this)();\r\n    } else if (this.element && this.element.ownerDocument) {\r\n      const channel = this.$props.cloudChannel ? this.$props.cloudChannel : '5';\r\n      const apiKey = this.$props.apiKey ? this.$props.apiKey : 'no-api-key';\r\n\r\n      const scriptSrc = isNullOrUndefined(this.$props.tinymceScriptSrc) ?\r\n        `https://cdn.tiny.cloud/1/${apiKey}/tinymce/${channel}/tinymce.min.js` :\r\n        this.$props.tinymceScriptSrc;\r\n        \r\n      // 动态插入    <script referrerpolicy=\"origin\" type=\"application/javascript\" id=\"tiny-script\" src=\"https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js\"></script>\r\n      ScriptLoader.load(\r\n        this.element.ownerDocument,\r\n        scriptSrc,\r\n        initialise(this)\r\n      );\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    if (getTinymce() !== null) {\r\n      getTinymce().remove(this.editor);\r\n    }\r\n  },\r\n  deactivated() {\r\n    if (!this.inlineEditor) {\r\n      this.cache = this.editor.getContent();\r\n      getTinymce()?.remove(this.editor);\r\n    }\r\n  },\r\n  activated() {\r\n    if (!this.inlineEditor && this.initialized) {\r\n      initialise(this)();\r\n    }\r\n  },\r\n  render(h: any) {\r\n    return this.inlineEditor ? renderInline(h, this.elementId, this.$props.tagName) : renderIframe(h, this.elementId);\r\n  }\r\n};\r\n","/**\r\n * Copyright (c) 2018-present, Ephox, Inc.\r\n *\r\n * This source code is licensed under the Apache 2 license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n */\r\n\r\nimport { Editor } from './components/Editor';\r\n\r\nexport default Editor;\r\n","\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator'\nimport Editor from '@/components/Editors/index.ts'\n\n@Component({\n  components: {\n    Editor\n  }\n})\nexport default class Upload extends Vue {\n  @Prop({\n    type: Object,\n    default: () => {\n      return {}\n    }\n  }) itemConfig !: ItemConf\n\n  @Prop({\n    type: Object,\n    default: () => {\n      return {}\n    }\n  }) formConfig !: FormConf\n  initConfig = {\n    language:'zh_CN',\n    plugins: 'print preview searchreplace autolink directionality visualchars fullscreen image link media template code table charmap hr pagebreak nonbreaking anchor insertdatetime advlist lists wordcount imagetools textpattern paste emoticons',\n    toolbar: 'code forecolor backcolor bold italic underline strikethrough link anchor | alignleft aligncenter alignright indent2em lineheight | \\\n    bullist numlist | blockquote subscript superscript removeformat | \\\n    table image media bdmap emoticons charmap hr pagebreak insertdatetime | fullscreen ',\n    height: '500px',\n    resize: true\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./InfoEditor.vue?vue&type=template&id=79b7fd22&\"\nimport script from \"./InfoEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./InfoEditor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./InfoEditor.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","const Base64 = {\n  encode(str: string) {\n     return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,\n        function toSolidBytes(match, p1) {\n          const num = Number('0x' + p1)\n          return String.fromCharCode(num)\n      }))\n  },\n  decode(str: string) {\n    return decodeURIComponent(atob(str).split('').map(function (c) {\n      return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)\n    }).join(''))\n  }\n}\n\nexport function getEncodedContent(tinymceHtml: string): string {\n  return Base64.encode(tinymceHtml)\n}\n\nexport function getDecodedContent(encoded: string): string {\n  return Base64.decode(encoded)\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upload.vue?vue&type=style&index=0&lang=less&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoEditor.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload-wrapper\"},[_c('div',{staticClass:\"form-wrapper\"},[_c('dq-form',{attrs:{\"formConfig\":_vm.formConfig}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\r\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport DqForm from '@/components/DqForm.vue'\r\nimport InfoEditor from '@/components/InfoEditor.vue'\r\nimport axios from 'axios'\r\nimport { getEncodedContent } from '@/components/Editors/getEncodeData.ts'\r\nimport { Apis } from '@/api/index.ts'\r\n\r\n@Component({\r\n  components: {\r\n    DqForm,\r\n    InfoEditor\r\n  }\r\n})\r\nexport default class Upload extends Vue {\r\n    formConfig = {\r\n    width: '80%',\r\n    items: {\r\n      projectName: {\r\n        hint: '请输入项目名称',\r\n        label: '项目名称',\r\n        placeholder: '请输入项目名称',\r\n        type: 'input',\r\n        value: '',\r\n        submitkey: 'Name',\r\n        error: '',\r\n        required: true,\r\n        rules: [\r\n        ]\r\n      },\r\n      deadline: {\r\n        label: '截止日期',\r\n        placeholder: '请输入',\r\n        type: 'component',\r\n        component: ()=> import('@/components/DateSelect.vue'),\r\n        required: true,\r\n        value: '',\r\n        error: '',\r\n        submitkey: 'Deadline',\r\n        rules: [\r\n        ]\r\n      },\r\n      tutor : {\r\n        label: '导师团队',\r\n        placeholder: '请输入导师团队（可能需要改成选项）',\r\n        required: true,\r\n        type: 'input',\r\n        value: '',\r\n        error: '',\r\n        submitkey: 'Team',\r\n        rules: [\r\n        ]\r\n      },\r\n      academy : {\r\n        label: '所属学院',\r\n        placeholder: '请输入所属学院',\r\n        required: true,\r\n        type: 'input',\r\n        value: '',\r\n        error: '',\r\n        submitkey: 'Academy',\r\n        rules: [\r\n        ]\r\n      },\r\n      content: {\r\n        label: '内容详情',\r\n        placeholder: '请输入',\r\n        type: 'component',\r\n        component: ()=> import('@/components/InfoEditor.vue'),\r\n        required: true,\r\n        ref:'infoEditor',\r\n        value: '',\r\n        submitkey: 'Detail',\r\n        error: '',\r\n        rules: [\r\n        ]\r\n      }\r\n    },\r\n    buttons: {\r\n      submit: {\r\n        name: 'submit',\r\n        text: '上传',\r\n        type: 'submit',\r\n        func: (data: any)=> {\r\n          // 对内容进行 base64 编码\r\n          data.Detail = getEncodedContent(data.Detail)\r\n          console.log('data.content',data.Deatil)\r\n          console.log('data encoded', getEncodedContent(data.Detail))\r\n          axios({\r\n            url: Apis.createproject,\r\n            data: data,\r\n            method: 'post'\r\n          }).then((resp)=>{\r\n            if(resp.data && resp.data.code === 10011){\r\n              // 登录成功\r\n              (this as any).$message('上传成功')\r\n              alert('上传成功，请在“资讯管理”中发布')\r\n            }\r\n          }).catch((error)=>{\r\n            (this as any).$message('未知错误，请重试')\r\n            console.log('upload fail', error)\r\n            alert('上传失败，请重试')\r\n          })\r\n        },\r\n      },\r\n      reset: {\r\n        name: 'reset',\r\n        type: 'reset',\r\n        text: '重置',\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upload.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upload.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Upload.vue?vue&type=template&id=aef445ea&\"\nimport script from \"./Upload.vue?vue&type=script&lang=ts&\"\nexport * from \"./Upload.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Upload.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}