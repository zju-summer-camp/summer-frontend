(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-581ab8f2"],{"0509":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"info-wrapper"},[n("div",{staticClass:"filter-wrapper"},[n("dq-filter",{attrs:{filterConfig:t.filterConfig}})],1),n("div",{staticClass:"table-wrapper"},[n("div",{staticClass:"table-info-wrapper"},[n("el-table",{attrs:{data:t.tableData,border:""}},[n("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"160"}}),n("el-table-column",{attrs:{prop:"team",label:"导师团队",width:"160"}}),n("el-table-column",{attrs:{prop:"academy",label:"所属学院",width:"140"}}),n("el-table-column",{attrs:{label:"项目简介"}},[t._v(' prop="detail" ')]),n("el-table-column",{attrs:{prop:"deadline",label:"截止日期",width:"120"}})],1)],1),t.tableData?n("div",{staticClass:"table-operations-wrapper"},["management"===t.type?n("project-management",{attrs:{tableData:t.tableData}}):n("project-signup",{attrs:{tableData:t.tableData}})],1):t._e()]),n("div",{staticClass:"pagination-wrapper"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.pagination.total,"current-page":t.pagination.current,"page-size":t.pagination.size},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.pagination,"current",e)},"update:current-page":function(e){return t.$set(t.pagination,"current",e)}}})],1)])},i=[],r=n("9ab4"),o=n("1b40"),s=n("bc3a"),l=n.n(s),c=n("79f6"),u=n("1508"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"project-signup-wrapper"},[n("div",{staticClass:"project-signup"},[n("el-table",{attrs:{data:t.tableData,border:""}},[n("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"operation-wrapper"},[n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),t.projectDetail(e.$index)}}},[t._v(" 详情 ")]),n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),t.signupDialog(e.$index)}}},[t._v(" 报名 ")])],1)]}}])})],1)],1),n("el-dialog",{attrs:{title:"请确认",visible:t.showSignup,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.showSignup=e}}},[n("div",[n("div",[n("i",{staticClass:"el-icon-warning",style:{color:"#F56C6C","font-size":"30px","vertical-align":"middle",padding:"5px"}}),n("span",{staticClass:"signup-hint"},[t._v("报名成功后，将无法修改报名项目，请确认")])]),n("dq-form",{attrs:{formConfig:t.formConfig}})],1)]),n("div",{staticClass:"drawer-wrapper"},[n("el-drawer",{attrs:{title:"项目详情",visible:t.drawer,direction:"rtl",size:"70%"},on:{"update:visible":function(e){t.drawer=e}}},[n("div",{staticClass:"drawer-content"},[n("div",{domProps:{innerHTML:t._s(t.details)}})])])],1)],1)},f=[],d=n("1881"),b=n("bb4e"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.details="",e.drawer=!1,e.showSignup=!1,e.projectID=0,e.formConfig={width:"100%",items:{},buttons:{submit:{type:"submit",text:"确认报名",func:function(t){e.signup(),e.handleClose()}},cancel:{text:"我再逛逛",func:function(t){e.handleClose()}}}},e}return Object(r["c"])(e,t),e.prototype.projectDetail=function(t){var e=this.tableData[t],n=Object(d["a"])(e.detail);this.details=n,this.drawer=!0},e.prototype.signupDialog=function(t){console.log(t),this.projectID=this.tableData[t].id||0,this.showSignup=!0},e.prototype.signup=function(){l()({url:c["a"].candidates,method:"post",data:{projectID:this.projectID}}).then((function(t){alert("报名成功"),console.log("报名的结果",t)})).catch((function(t){alert("报名失败，用户无权限或已报名。如有疑问，请联系 18888xxxxxxx")}))},e.prototype.handleClose=function(){this.showSignup=!1},Object(r["b"])([Object(o["b"])({type:Array,default:function(){return{}}})],e.prototype,"tableData",void 0),e=Object(r["b"])([Object(o["a"])({components:{DqForm:b["a"]}})],e),e}(o["c"]),g=h,v=g,m=(n("8bea"),n("2877")),y=Object(m["a"])(v,p,f,!1,null,null,null),C=y.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"project-signup-wrapper"},[n("div",{staticClass:"project-signup"},[n("el-table",{attrs:{data:t.tableData,border:""}},[n("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(t._s(t.tableData[e.$index].published?t.statusOptions[0].name:t.statusOptions[1].name))])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"operation-wrapper"},[n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),t.projectDetail(e.$index)}}},[t._v(" 详情 ")]),n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),t.projectDetail(e.$index)}}},[t._v(" 编辑 ")]),n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),t.changeStatus(e.$index,e)}}},[t._v(" 修改状态 ")])],1)]}}])})],1)],1),n("div",{staticClass:"drawer-wrapper"},[n("el-drawer",{attrs:{title:"项目详情",visible:t.drawer,direction:"rtl",size:"70%"},on:{"update:visible":function(e){t.drawer=e}}},[n("div",{staticClass:"drawer-content"},[n("div",{domProps:{innerHTML:t._s(t.details)}})])])],1),n("el-dialog",{attrs:{title:"修改状态",visible:t.showReviseStatus,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.showReviseStatus=e}}},[n("div",[n("div",[t._v("当前正在修改 "+t._s(t.reviseStatusInfo.name)+" 项目状态")]),n("dq-form",{attrs:{formConfig:t.formConfig}})],1)])],1)},j=[],D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.details="",e.drawer=!1,e.showReviseStatus=!1,e.reviseStatusInfo={id:""},e.statusOptions=[{name:"未发布",value:1},{name:"已发布",value:2}],e.formConfig={width:"100%",labelWidth:"120px",items:{published:{label:"状态",placeholder:"请选择状态",type:"select",options:e.statusOptions,value:"",submitkey:"Published",error:"",required:!0,rules:[]}},buttons:{submit:{type:"submit",text:"修改",func:function(t){t["ID"]=e.getID(),t["Published"]=t["Published"]!==e.statusOptions[0].value,l()({url:c["a"].publishment,method:"post",data:t}).then((function(t){console.log(t),alert("修改成功"),e.handleClose()})).catch((function(t){alert("修改失败，请重试")}))}},cancel:{text:"取消",func:function(t){e.handleClose()}}}},e}return Object(r["c"])(e,t),e.prototype.getID=function(){return this.reviseStatusInfo.id},e.prototype.changeStatus=function(t,e){this.reviseStatusInfo=this.tableData[t],this.showReviseStatus=!0},e.prototype.projectDetail=function(t){var e=this.tableData[t],n=Object(d["a"])(e.detail);this.details=n,this.drawer=!0},e.prototype.handleClose=function(){this.showReviseStatus=!1},Object(r["b"])([Object(o["b"])({type:Array,default:function(){return{}}})],e.prototype,"tableData",void 0),e=Object(r["b"])([Object(o["a"])({components:{DqForm:b["a"]}})],e),e}(o["c"]),O=D,x=O,_=(n("9173"),Object(m["a"])(x,w,j,!1,null,null,null)),k=_.exports,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.filterConfig={width:"90%",items:{team:{label:"导师团队",placeholder:"请输入导师团队",type:"input",value:"",submitkey:"team"},academy:{label:"所属学院",placeholder:"请输入所属学院",type:"input",value:"",submitkey:"academy"}},buttons:{submit:{text:"查询",func:function(t){e.getProjectList(),e.print(),console.log("this1",e)}}}},e.tableData=[],e.pagination={current:1,size:3,total:1},e.drawer=!1,e.details="",e}return Object(r["c"])(e,t),e.prototype.print=function(){console.log("能否调用this")},e.prototype.getProjectList=function(){var t=this;l.a.get(c["a"].searchproject,{params:{team:this.filterConfig.items.team.value,academy:this.filterConfig.items.academy.value,page:this.pagination.current,limit:this.pagination.size}}).then((function(e){var n=e&&e.data&&e.data.Data,a=n&&n.projects;t.tableData=a,t.pagination.total=n&&n.count||10}))},e.prototype.pageChange=function(){console.log("sss",this.pagination.current)},e.prototype.handleSizeChange=function(t){console.log("每页 "+t+" 条")},e.prototype.handleCurrentChange=function(t){console.log("当前页: "+t),this.pagination.current=t,this.getProjectList()},e.prototype.mounted=function(){this.getProjectList()},Object(r["b"])([Object(o["b"])({type:String,default:function(){return"student"}})],e.prototype,"type",void 0),e=Object(r["b"])([Object(o["a"])({components:{DqFilter:u["a"],ProjectSignup:C,ProjectManagement:k}})],e),e}(o["c"]),z=S,I=z,P=(n("4280"),Object(m["a"])(I,a,i,!1,null,null,null));e["a"]=P.exports},1508:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dq-filter-wrapper",style:{width:t.filterConfig.width?t.filterConfig.width:"auto"}},[n("div",{staticClass:"filters-wrapper"},t._l(t.filterConfig.items,(function(e,a){return n("dq-form-item",{key:a,attrs:{itemConfig:e,filterConfig:t.filterConfig}})})),1),n("div",{staticClass:"filter-buttons-wrapper"},t._l(t.filterConfig.buttons,(function(e){return n("el-button",{key:e.name,attrs:{disabled:e.disabled},on:{click:function(n){return t.clickBtn(e)}}},[t._v(t._s(e.text))])})),1)])},i=[],r=n("9ab4"),o=n("1b40"),s=n("30bc"),l=n("bc3a"),c=n.n(l),u=n("1a8f"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.keys=Array.from(Object.keys(e.filterConfig.items)),e}return Object(r["c"])(e,t),e.prototype.validKeys=function(t){for(var e=!0,n=0,a=t;n<a.length;n++){var i=a[n];e=Object(u["a"])(this.filterConfig.items[i],this.filterConfig)&&e}return e},e.prototype.getData=function(){for(var t=this.filterConfig.items,e={},n=0,a=this.keys;n<a.length;n++){var i=a[n],r=t[i],o=r.submitkey||i,s=r.value;e[o]=s}return e},e.prototype.sendAxios=function(t){"get"===t.method?c.a.get(t.url,{params:this.getData()}).then((function(e){t.success(e)})).catch((function(e){t.fail(e)})):c()({url:t.url,data:this.getData(),method:"post"}).then((function(e){t.success(e)})).catch((function(e){t.fail(e)}))},e.prototype.clickBtn=function(t){var e=this.getData();if("submit"===t.type){if(console.log("校验表单填写项是否正确..."),!this.validKeys(this.keys))return;console.log("校验通过")}t.func&&t.func(e),"reset"===t.type&&this.reset()},e.prototype.reset=function(){var t=this.filterConfig.items||{};for(var e in console.log("items",t),t)t[e].value="",t[e].error=""},Object(r["b"])([Object(o["b"])({type:Object,default:function(){return{}}})],e.prototype,"filterConfig",void 0),e=Object(r["b"])([Object(o["a"])({components:{DqFormItem:s["a"]}})],e),e}(o["c"]),f=p,d=f,b=(n("18ce"),n("2877")),h=Object(b["a"])(d,a,i,!1,null,null,null);e["a"]=h.exports},1881:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));var a={encode:function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){var n=Number("0x"+e);return String.fromCharCode(n)})))},decode:function(t){return decodeURIComponent(atob(t).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))}};function i(t){return a.encode(t)}function r(t){return a.decode(t)}},"18ce":function(t,e,n){"use strict";n("bf72")},2545:function(t,e,n){},4280:function(t,e,n){"use strict";n("2545")},"543d":function(t,e,n){},8087:function(t,e,n){},"8bea":function(t,e,n){"use strict";n("8087")},9173:function(t,e,n){"use strict";n("543d")},bf72:function(t,e,n){}}]);
//# sourceMappingURL=chunk-581ab8f2.4fc9970e.js.map